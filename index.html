<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Latihan bootstrap</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
      integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="container">
      <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand">Mini Ecommerce</a>
        <form class="form-inline" id="formItem">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Search"
            id="keyword"
            aria-label="Search"
          />
          <button
            class="btn btn-outline-success my-2 my-sm-0"
            type="submit"
            id="searchItem"
          >
            Search
          </button>
        </form>
        <button class="btn btn-primary" id="cart">
          <i class="fas fa-shopping-cart"></i
          ><span id="cartItemCount">(0)</span>
        </button>
      </nav>
      <div class="row">
        <div class="row col-md-12 m-2" id="listBarang">
          <!-- Kerjakan dibawah ini! -->
          <div class="card m-2" style="width: 18rem">
            <img
              src="img/logitek.jpg"
              class="card-img-top mt-4 mb-4"
              alt="logitek"
            />
            <div class="card-body">
              <h5 class="card-title">Keyboard Logitek</h5>
              <p class="card-text">Keyboard yang mantap untuk kantoran.</p>
              <p>Rp. 60.000.00</p>
              <a href="#" class="btn btn-primary">Add To Cart</a>
            </div>
          </div>
          <div class="card m-2" style="width: 18rem">
            <img src="img/msi.jpg" class="card-img-top mt-4 mb-4" alt="msi" />
            <div class="card-body">
              <h5 class="card-title">Keyboard MSI</h5>
              <p class="card-text">Keyboard gaming MSI mekanik</p>
              <p>Rp. 300.000.00</p>
              <a href="#" class="btn btn-primary">Add To Cart</a>
            </div>
          </div>
          <div class="card m-2" style="width: 18rem">
            <img
              src="img/genius.jpg"
              class="card-img-top mt-4 mb-4"
              alt="genius"
            />
            <div class="card-body">
              <h5 class="card-title">Mouse Genius</h5>
              <p class="card-text">Mouse genius biar lebih pinter.</p>
              <p>Rp. 50.000.00</p>
              <a href="#" class="btn btn-primary">Add To Cart</a>
            </div>
          </div>
          <div class="card m-2" style="width: 18rem">
            <img
              src="img/jerry.jpg"
              class="card-img-top mt-4 mb-4"
              alt="jerry"
            />
            <div class="card-body">
              <h5 class="card-title">Mouse Jerry</h5>
              <p class="card-text">Mouse yang disukai kucing.</p>
              <p>Rp. 30.000.00</p>
              <a href="#" class="btn btn-primary">Add To Cart</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const listBarang = document.getElementById("listBarang");
        const formItem = document.getElementById("formItem");
        const keywordInput = document.getElementById("keyword");
        let totalBarangDiKeranjang = 0;

        var items = [
          [
            "001",
            "Keyboard Logitek",
            "Rp. 60.000.00",
            "Keyboard yang mantap untuk kantoran",
            "img/logitek.jpg",
            "Logitek",
          ],
          [
            "002",
            "Keyboard MSI",
            "Rp. 300.000.00",
            "Keyboard gaming MSI mekanik",
            "img/msi.jpg",
            "MSI",
          ],
          [
            "003",
            "Mouse Genius",
            "Rp. 50.000.00",
            "Mouse Genius biar lebih pinter",
            "img/genius.jpg",
            "Genius",
          ],
          [
            "004",
            "Mouse Jerry",
            "Rp. 30.000.00",
            "Mouse yang disukai kucing",
            "img/jerry.jpg",
            "Jerry",
          ],
        ];

        function Cari(keyword) {
          listBarang.innerHTML = "";
          for (let i = 0; i < items.length; i++) {
            const item = items[i];
            if (item[1].toLowerCase().includes(keyword.toLowerCase())) {
              const card = document.createElement("div");
              card.classList.add("col-3.5", "mt-2");
              card.innerHTML = `
                    <div class ="col-4 mt-2"> 
                        <div class="card card-img-top mt-2 mb-1" style="width: 18rem;">
                            <img src="${item[4]}" class="card-img-top"  alt="${item[5]}">
                            <div class="card-body">
                                <h5 class="card-title" id="itemName">${item[1]}</h5>
                                <p class="card-text" id="itemDesc">${item[3]}</p>
                                <p class="card-text">Rp ${item[2]}</p>
                                <a href="#" class="btn btn-primary tmbh-ke-keranjang" data-id="${item[0]}">Add To Cart</a>
                            </div>
                        </div>
                    </div>
                `;
              listBarang.appendChild(card);
            }
          }
          const btnTambahKeKeranjang =
            document.querySelectorAll(".tmbh-ke-keranjang");
          btnTambahKeKeranjang.forEach((button) => {
            button.addEventListener("click", tambahKeKeranjang);
          });
        }

        // menangani ketika tombol submit diklik
        formItem.addEventListener("submit", function (e) {
          e.preventDefault();
          const keyword = keywordInput.value;
          Cari(keyword);
        });

          function tambahKeKeranjang(event) {
          const itemId = event.target.getAttribute("data-id");
          // untuk mencari item dari array items yang memiliki id yg sama dengan itemId
          const item = items.find((item) => item[0] === itemId);

          if (totalBarangDiKeranjang < 9) {
            totalBarangDiKeranjang++;
          } else {
            totalBarangDiKeranjang = `9+`;
          }

          document.getElementById(
            "cartItemCount"
          ).textContent = `(${totalBarangDiKeranjang})`;
        }
        
        // Menampilkan semua barang saat halaman dimuat
        Cari("");
      });
    </script>
  </body>
</html>
